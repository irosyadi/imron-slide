<!DOCTYPE html>
<html lang="en"><head>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-html/tabby.min.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.8.27">

  <meta name="author" content="Imron Rosyadi">
  <title>Instrumentation – Operational Amplifiers in Instrumentation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="site_libs/revealjs/dist/theme/quarto-b0356e9119c1bdfd0db189d130feb51c.css">
  <link href="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
  <link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Operational Amplifiers in Instrumentation</h1>
  <p class="subtitle">Instruments 2.2</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Imron Rosyadi 
</div>
</div>
</div>

</section>
<section id="learning-objectives" class="slide level2 scrollable">
<h2>Learning Objectives</h2>
<p>By the end of this session, you should be able to:</p>
<ol type="1">
<li>Describe the ideal op amp model and use the two “golden rules” for circuit analysis.</li>
<li>Analyze and design basic op amp configurations:
<ul>
<li>Inverting and noninverting amplifiers</li>
<li>Summing amplifiers and voltage followers</li>
</ul></li>
<li>Explain nonideal op amp parameters (offsets, slew rate, bandwidth) and when they matter.</li>
<li>Understand and design basic instrumentation circuits:
<ul>
<li>Differential / instrumentation amplifiers</li>
<li>Voltage‑to‑current and current‑to‑voltage converters</li>
</ul></li>
<li>Implement simple integrating and differentiating op amp circuits.</li>
<li>Apply a structured design process to real signal‑conditioning problems.</li>
</ol>
<aside class="notes">
<p>Explicitly tie each objective to later slides: - Objectives 1–3: Sections 4.1–4.2. - Objective 4: Section 5.4 and example bridge instrumentation. - Objective 5: Sections 5.7–5.9. - Objective 6: Design guideline examples.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="why-op-amps-in-instrumentation" class="slide level2">
<h2>Why Op Amps in Instrumentation?</h2>
<ul>
<li>Process control and measurement systems need:
<ul>
<li>Amplification and attenuation</li>
<li>Impedance matching</li>
<li>Level shifting (offsets)</li>
<li>Filtering and linearization</li>
<li>Voltage ↔︎ current conversion</li>
</ul></li>
<li>Historically: built from tubes, then discrete transistors</li>
<li>Today: integrated‑circuit (IC) implementations dominate
<ul>
<li>Small size</li>
<li>Low power</li>
<li>Low cost</li>
<li>Consistent and well‑documented behavior</li>
</ul></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Think of an op amp as a <strong>universal analog building block</strong> you configure with a few external resistors and capacitors to implement many different transfer functions.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Relate this to typical ECE contexts: sensor interfaces, DAQ boards, motor controllers, biomedical instrumentation. Stress that almost all “analog front ends” hide one or more op amps inside.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="op-amp-characteristics-the-blackbox-view" class="slide level2">
<h2>4.1 Op Amp Characteristics – The Black‑Box View</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Symbol</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/6ffaabe24e073e39380fec217e301f8b_MD5.jpg" height="220"></p>
<figcaption>Op amp symbol</figcaption>
</figure>
</div>
<ul>
<li>Two inputs:
<ul>
<li><code>+</code> noninverting</li>
<li><code>−</code> inverting</li>
</ul></li>
<li>One output</li>
<li>Power pins (<span class="math inline">\(+V_s\)</span>, <span class="math inline">\(-V_s\)</span>) typically <strong>not drawn</strong> on signal schematics</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Transfer Behavior</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/4fa467386e7c6c531e9abf67e2bb6eb2_MD5.jpg" height="220"></p>
<figcaption>Op amp transfer</figcaption>
</figure>
</div>
<ul>
<li>Output vs.&nbsp;differential input <span class="math inline">\(V_d = V_2 - V_1\)</span></li>
<li>Large voltage gain in linear region</li>
<li>Saturates at <span class="math inline">\(\pm V_{\text{sat}}\)</span> set by supply rails</li>
</ul>
</div></div>
<aside class="notes">
<p>Clarify the mapping between figure labels and our notation: - In the text, <span class="math inline">\(V_1\)</span> is on the noninverting terminal (+), <span class="math inline">\(V_2\)</span> is on the inverting terminal (−). - The differential input <span class="math inline">\(V_d = V_2 - V_1\)</span>. - When <span class="math inline">\(V_2 &gt; V_1\)</span> (more positive at the inverting input), the output goes negative (−). This inversion behavior is the reason for the input naming.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ideal-op-amp-key-properties" class="slide level2 scrollable">
<h2>Ideal Op Amp – Key Properties</h2>
<ul>
<li><strong>Infinite open‑loop gain</strong> <span class="math inline">\(A\)</span>
<ul>
<li>In linear region <span class="math inline">\(V_{\text{out}} = A \,(V_+ - V_-)\)</span></li>
<li>Practically <span class="math inline">\(A \gg 10^5\)</span> even at low frequency</li>
</ul></li>
<li><strong>Infinite input impedance</strong>
<ul>
<li>No current flows into <span class="math inline">\(V_+\)</span> or <span class="math inline">\(V_-\)</span></li>
</ul></li>
<li><strong>Zero output impedance</strong>
<ul>
<li>Output acts as an ideal voltage source</li>
</ul></li>
<li><strong>Infinite bandwidth</strong>, zero noise, no offsets (in the ideal model)</li>
</ul>
<p>These properties lead to <strong>two powerful analysis rules</strong> when negative feedback is used.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><strong>Golden Rules for Ideal Op Amps (with negative feedback):</strong></p>
<ol type="1">
<li>No current flows into the input terminals: <span class="math inline">\(I_+ = I_- = 0\)</span>.</li>
<li>The inputs are at the same voltage: <span class="math inline">\(V_+ = V_-\)</span>.</li>
</ol>
</div>
</div>
</div>
<aside class="notes">
<p>Emphasize that these rules are not fundamental device physics; they are <strong>approximations</strong> that hold because the open‑loop gain is huge and feedback forces the input difference to be near zero. Also highlight: these rules apply only when the op amp is <strong>not saturated</strong> and there <strong>is</strong> a feedback path from output to at least one input.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="visualizing-op-amp-saturation" class="slide level2">
<h2>Visualizing Op Amp Saturation</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class=""><p></p>
<div>
<p><img data-src="ins_22_files\figure-revealjs\mermaid-figure-1.png" style="width:6.19in;height:3.15in"></p>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<ul>
<li>If the differential input is more than a few hundred µV, the output hits <span class="math inline">\(\pm V_{\text{sat}}\)</span>.</li>
<li>Only a <strong>very narrow band</strong> around <span class="math inline">\(V_+ \approx V_-\)</span> is linear.</li>
</ul>
<aside class="notes">
<p>Connect this to comparator behavior: - An op amp with no feedback effectively acts like a <strong>comparator</strong>: output is either high or low depending on the sign of <span class="math inline">\(V_+ - V_-\)</span>. - For analog amplification applications we always add feedback to force the op amp to operate in the narrow linear region.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ideal-inverting-amplifier-circuit" class="slide level2">
<h2>Ideal Inverting Amplifier – Circuit</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/aae8837ac8099ea17b2dccfd35756c93_MD5.jpg" height="260"></p>
<figcaption>Inverting amplifier</figcaption>
</figure>
</div>
<ul>
<li>Input <span class="math inline">\(V_{\text{in}}\)</span> through <span class="math inline">\(R_1\)</span> to the inverting (−) input</li>
<li>Feedback resistor <span class="math inline">\(R_2\)</span> from output to inverting node</li>
<li>Noninverting (+) input connected to ground</li>
<li>The inverting node is called the <strong>summing point</strong> or <strong>virtual ground</strong></li>
</ul>
<aside class="notes">
<p>Point out: the inverting input is at a virtual ground (0 V) because ideal feedback keeps <span class="math inline">\(V_- = V_+ = 0\)</span> V, but no current flows into the input, so this point is <strong>not actually connected</strong> to physical ground. This distinction is important when considering input and feedback currents.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="ideal-inverting-amplifier-derivation" class="slide level2">
<h2>Ideal Inverting Amplifier – Derivation</h2>
<p>At the summing node (inverting input), apply KCL and the two golden rules.</p>
<ul>
<li>Rule 1: No current into input → sum of resistor currents is zero.</li>
<li>Rule 2: <span class="math inline">\(V_- = V_+ = 0\)</span> V (since <span class="math inline">\(V_+ = 0\)</span>).</li>
</ul>
<p>Currents:</p>
<ul>
<li>Through <span class="math inline">\(R_1\)</span>: <span class="math inline">\(I_1 = \dfrac{V_{\text{in}} - 0}{R_1} = \dfrac{V_{\text{in}}}{R_1}\)</span></li>
<li>Through <span class="math inline">\(R_2\)</span>: <span class="math inline">\(I_2 = \dfrac{V_{\text{out}} - 0}{R_2} = \dfrac{V_{\text{out}}}{R_2}\)</span></li>
</ul>
<p>KCL:</p>
<p><span class="math display">\[
I_1 + I_2 = 0 \tag{29}
\]</span></p>
<p>Substitute:</p>
<p><span class="math display">\[
\frac{V_{\text{in}}}{R_1} + \frac{V_{\text{out}}}{R_2} = 0 \tag{30}
\]</span></p>
<p>Solve for <span class="math inline">\(V_{\text{out}}\)</span>:</p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{R_2}{R_1} V_{\text{in}} \tag{31}
\]</span></p>
<ul>
<li>Gain magnitude: <span class="math inline">\(\left|\dfrac{V_{\text{out}}}{V_{\text{in}}}\right| = \dfrac{R_2}{R_1}\)</span></li>
<li>180° phase inversion (sign change)</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>The <strong>input impedance</strong> seen by <span class="math inline">\(V_{\text{in}}\)</span> is approximately <span class="math inline">\(R_1\)</span>.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Relate this to a simple ECE example: use an inverting amplifier to scale a 0–5 V DAC output to a 0–10 V or −10 to +10 V range. Also point out that if <span class="math inline">\(R_2 &lt; R_1\)</span>, the circuit attenuates; if <span class="math inline">\(R_2 &gt; R_1\)</span>, it amplifies.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="interactive-inverting-amplifier-gain-explorer" class="slide level2">
<h2>Interactive: Inverting Amplifier Gain Explorer</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code hidden" id="cb1" data-startfrom="224" data-source-offset="-0"><pre class="sourceCode numberSource js number-lines code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 223;"><span id="cb1-224"><a></a>viewof R1_k <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">100</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"R1 (kΩ)"</span>})</span>
<span id="cb1-225"><a></a>viewof R2_k <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">100</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="dv">47</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"R2 (kΩ)"</span>})</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div>
<div id="pyodide-1" class="exercise-cell">

</div>
<script type="pyodide-1-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWUsImlucHV0IjpbIlIxX2siLCJSMl9rIl0sIm1heC1saW5lcyI6MTB9LCJjb2RlIjoiZ2FpbiA9IC0gUjJfayAvIFIxX2tcbnByaW50KGZcIkludmVydGluZyBhbXBsaWZpZXIgZ2FpbiBBdiA9IFZvdXQvVmluID0ge2dhaW46LjJmfVwiKSJ9
</script>
</div>
<aside class="notes">
<p>Have students adjust the sliders and observe how the gain changes with the resistor ratio. Ask: If <span class="math inline">\(R_1 = 10\)</span> kΩ and <span class="math inline">\(R_2 = 47\)</span> kΩ, what’s the gain? What happens if we swap them? Reinforce that only the <strong>ratio</strong> matters for the gain.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="nonideal-effects-real-op-amp-behavior" class="slide level2">
<h2>Nonideal Effects – Real Op Amp Behavior</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Nonideal I/O characteristic</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/7c49617b80c788542fa0230e5851c4df_MD5.jpg" height="220"></p>
<figcaption>Nonideal I/O</figcaption>
</figure>
</div>
<ul>
<li>Finite slope → finite open‑loop gain <span class="math inline">\(A\)</span></li>
<li><span class="math inline">\(V_{\text{out}}\)</span> saturates at <span class="math inline">\(\pm V_{\text{sat}}\)</span></li>
<li>Input offset voltage <span class="math inline">\(V_{\text{ios}}\)</span> shifts the curve</li>
</ul>
</div><div class="column" style="width:50%;">
<p><strong>Nonideal inverting amplifier model</strong></p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/fbcbd258b099441712051c3dd83153fb_MD5.jpg" height="220"></p>
<figcaption>Nonideal inverting amp</figcaption>
</figure>
</div>
<ul>
<li>Finite input impedance <span class="math inline">\(z_{\text{in}}\)</span></li>
<li>Nonzero output impedance <span class="math inline">\(z_0\)</span></li>
<li>Finite gain <span class="math inline">\(A\)</span></li>
</ul>
</div></div>
<p>Key definitions:</p>
<ul>
<li>Open‑loop gain: <span class="math display">\[
A = \left|\frac{\Delta V_{\text{out}}}{\Delta(V_2 - V_1)}\right|
    \approx \left|\frac{2 V_{\text{sat}}}{\Delta V}\right|
\]</span></li>
<li>Typical values:
<ul>
<li><span class="math inline">\(V_{\text{sat}} \approx 10\)</span> V</li>
<li><span class="math inline">\(\Delta V \approx 100\,\mu\)</span>V → <span class="math inline">\(A \approx 200{,}000\)</span></li>
</ul></li>
</ul>
<aside class="notes">
<p>Explain that <strong>closed‑loop gain</strong> (with feedback) is mostly set by external resistors; the huge open‑loop gain makes the ideal rules very accurate. Mention that <span class="math inline">\(z_{\text{in}}\)</span> is often in the MΩ range and <span class="math inline">\(z_0\)</span> in tens of Ω, so loading effects are small in typical instrumentation applications.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="nonideal-inverting-amplifier-impact-on-gain" class="slide level2">
<h2>Nonideal Inverting Amplifier – Impact on Gain</h2>
<p>Using the nonideal model (Figure 27b), we can derive:</p>
<p><span class="math display">\[
V_0 = -\frac{R_2}{R_1}\left(\frac{1}{1 - \mu}\right) V_{\text{in}} \tag{32}
\]</span></p>
<p>where</p>
<p><span class="math display">\[
\mu = \frac{\left(1 + \frac{z_0}{R_2}\right)\left(1 + \frac{R_2}{R_1} + \frac{R_2}{z_{\text{in}}}\right)}{A + \frac{z_0}{R_2}} \tag{33}
\]</span></p>
<p>If <span class="math inline">\(\mu \ll 1\)</span>, the gain reduces to the ideal form:</p>
<p><span class="math display">\[
V_0 \approx -\frac{R_2}{R_1} V_{\text{in}} \tag{31 revisited}
\]</span></p>
<p><strong>Example parameter values:</strong></p>
<ul>
<li><span class="math inline">\(A = 200{,}000\)</span></li>
<li><span class="math inline">\(z_0 = 75\,\Omega\)</span></li>
<li><span class="math inline">\(z_{\text{in}} = 2\,\text{M}\Omega\)</span></li>
<li>Gain <span class="math inline">\(R_2/R_1 = 100\)</span>, with <span class="math inline">\(R_2 = 100\,\text{k}\Omega\)</span></li>
</ul>
<p>Then</p>
<ul>
<li><span class="math inline">\(\mu \approx 0.0005\)</span></li>
<li>Error in gain ≈ <span class="math inline">\(0.05\%\)</span></li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>For most low‑frequency instrumentation designs, <strong>ideal op amp analysis is accurate enough</strong>, and we ignore <span class="math inline">\(\mu\)</span> unless we push bandwidth or precision limits.</p>
</div>
</div>
</div>
<aside class="notes">
<p>If time allows, walk through substituting the numerical values into (33) to show the smallness of <span class="math inline">\(\mu\)</span>. Connect this to why datasheets often say “closed‑loop gain accuracy ±0.1%” for typical resistor tolerances.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="practical-op-amp-specifications" class="slide level2">
<h2>4.2 Practical Op Amp Specifications</h2>
<p>Important datasheet parameters beyond gain and impedances:</p>
<ul>
<li><strong>Input offset voltage</strong> <span class="math inline">\(V_{\text{ios}}\)</span>
<ul>
<li>Voltage that must be applied between inputs to drive <span class="math inline">\(V_{\text{out}}\)</span> to zero.</li>
</ul></li>
<li><strong>Input offset current</strong>
<ul>
<li>Difference between the two input bias currents that must flow to get <span class="math inline">\(V_{\text{out}} = 0\)</span>.</li>
</ul></li>
<li><strong>Input bias current</strong>
<ul>
<li>Average of the two input currents at zero output.</li>
</ul></li>
<li><strong>Slew rate</strong> (V/µs)
<ul>
<li>Maximum rate of change of the output voltage for a step input.</li>
</ul></li>
<li><strong>Unity‑gain frequency (gain‑bandwidth product)</strong>
<ul>
<li>Frequency where open‑loop gain drops to 1 (0 dB).</li>
</ul></li>
</ul>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Offset voltages/currents matter <strong>most</strong> in:</p>
<ul>
<li>Low‑level signals (mV, µV)</li>
<li>High‑gain DC amplifiers</li>
<li>Precision instrumentation (e.g., strain gauges, biomedical signals)</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<p>Use a quick numerical example: - If <span class="math inline">\(V_{\text{ios}} = 1\)</span> mV and closed‑loop gain is 1000, the output offset can be ~1 V. Motivate the need for <strong>offset trimming</strong> and careful resistor selection.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="practical-circuit-op-amp-with-power-and-offset-trim" class="slide level2 scrollable">
<h2>Practical Circuit: Op Amp with Power and Offset Trim</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/e7730ae1e9be167ea6f7f25410658715_MD5.jpg" height="290"></p>
<figcaption>Inverting amp with power and offset trim</figcaption>
</figure>
</div>
<p>Key practical details:</p>
<ul>
<li>Bipolar supply: <span class="math inline">\(+V_s\)</span> and <span class="math inline">\(-V_s\)</span> (often ±12 V, ±15 V, etc.)</li>
<li>Optional <strong>offset trim pins</strong> to null input offset voltage using a trimmer resistor</li>
<li>Resistor at the noninverting input chosen to <strong>match</strong> effective resistance at inverting input to partially cancel input bias current errors</li>
</ul>
<aside class="notes">
<p>Explain how to do the offset‑null procedure:</p>
<ol type="1">
<li>Set <span class="math inline">\(V_{\text{in}} = 0\)</span>.</li>
<li>Measure <span class="math inline">\(V_{\text{out}}\)</span>.</li>
<li>Adjust the trim pot until <span class="math inline">\(V_{\text{out}} = 0\)</span>.</li>
</ol>
<p>Once set, the offset is compensated unless the op amp is replaced or temperature changes drastically. Also mention that many modern zero‑drift op amps internally auto‑correct offset, reducing need for external trim.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="think-ma-and-kω-output-current-limits" class="slide level2">
<h2>“Think mA and kΩ” – Output Current Limits</h2>
<p>Op amps have <strong>limited output current</strong>, typically ≈ 20 mA:</p>
<ul>
<li>Total output current = load current + feedback current</li>
<li>Using very small resistors can demand <strong>too much current</strong>, causing:
<ul>
<li>Output voltage droop</li>
<li>Distortion</li>
<li>Potential device damage</li>
</ul></li>
</ul>
<h3 id="example-17-bad-vs.-good-design">Example 17 – Bad vs.&nbsp;Good Design</h3>
<p>Desired: inverting amplifier with gain −4.5.</p>
<ul>
<li>Design equation: <span class="math inline">\(-4.5 = -R_2/R_1\)</span></li>
</ul>
<p><strong>Impractical choice:</strong> <span class="math inline">\(R_1 = 1\,\Omega\)</span>, <span class="math inline">\(R_2 = 4.5\,\Omega\)</span></p>
<ul>
<li>For <span class="math inline">\(V_{\text{in}} = 2\)</span> V: <span class="math inline">\(V_{\text{out}} = -9\)</span> V</li>
<li><span class="math inline">\(I_2 = -9/4.5 = -2\)</span> A (!) → far beyond op amp capability</li>
</ul>
<p><strong>Practical choice:</strong></p>
<ul>
<li><span class="math inline">\(R_1 = 1\,\text{k}\Omega\)</span>, <span class="math inline">\(R_2 = 4.5\,\text{k}\Omega\)</span></li>
<li>Same gain, but feedback current is only 2 mA</li>
</ul>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><strong>Rule of thumb:</strong> For general‑purpose op amps, choose resistor values such that currents are in the <strong>milliamp</strong> range and resistances in the <strong>kΩ</strong> range.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Ask students: If we used megaohm‑range resistors instead, what new problem might we encounter? (Answer: more thermal noise, higher sensitivity to bias currents and leakage.) So there is a tradeoff: avoid both extremely low and extremely high resistor values.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="op-amp-circuits-in-instrumentation-overview" class="slide level2 scrollable">
<h2>5. Op Amp Circuits in Instrumentation – Overview</h2>
<p>Common building blocks:</p>
<ol type="1">
<li><strong>Voltage follower</strong> (buffer) – unity gain, high input Z, low output Z.</li>
<li><strong>Inverting amplifier</strong> – gain set by ratio <span class="math inline">\(R_2/R_1\)</span>, can attenuate or amplify.</li>
<li><strong>Summing amplifier</strong> – weighted sum of multiple inputs.</li>
<li><strong>Noninverting amplifier</strong> – high input Z, gain ≥ 1.</li>
<li><strong>Differential and instrumentation amplifiers</strong> – measure differences, reject common mode.</li>
<li><strong>Voltage‑to‑current (V–I) and current‑to‑voltage (I–V) converters</strong> – common in 4–20 mA loops.</li>
<li><strong>Integrator and differentiator</strong> – time‑domain operations.</li>
<li><strong>Nonlinear / linearization circuits</strong> – e.g., logarithmic amplifiers.</li>
</ol>
<p>We will walk through each quickly with formulas and applications.</p>
<aside class="notes">
<p>Emphasize that you don’t need to memorize every configuration; you should recognize patterns and know where to look up exact formulas. Also, instrumentation often chains these blocks: e.g., sensor → bridge → instrumentation amp → filter → V–I converter.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="voltage-follower-buffer" class="slide level2">
<h2>5.1 Voltage Follower (Buffer)</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/c5065803a274c15a7a7e7700074655c8_MD5.jpg" height="260"></p>
<figcaption>Voltage follower</figcaption>
</figure>
</div>
<ul>
<li>Output directly fed back to inverting input (−)</li>
<li>Input applied to noninverting input (+)</li>
</ul>
<p><strong>Ideal behavior:</strong></p>
<ul>
<li><span class="math inline">\(V_{\text{out}} = V_{\text{in}}\)</span> (unity gain)</li>
<li>Very high input impedance (often &gt; 100 MΩ)</li>
<li>Very low output impedance (&lt; 100 Ω)</li>
</ul>
<p>Use case: <strong>Impedance transformer</strong></p>
<ul>
<li>Take a high‑impedance signal source (e.g., sensor, divider)</li>
<li>Deliver same voltage to a low‑impedance load without loading the sensor</li>
</ul>
<aside class="notes">
<p>Provide a real example: buffer the output of a thermistor divider or a potentiometer before feeding into an ADC with modest input impedance, to avoid changing the divider ratio. Mention that many ICs integrate a dedicated unity‑gain buffer op amp inside.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="inverting-amplifier-summing-amplifier" class="slide level2">
<h2>5.2 Inverting Amplifier &amp; Summing Amplifier</h2>
<p>Recall:</p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{R_2}{R_1} V_{\text{in}} \tag{31}
\]</span></p>
<p><strong>Summing Amplifier</strong> (two inputs example, Figure 31):</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/5e9931f215cf2825f80eafa1dee65b0b_MD5.jpg" height="260"></p>
<figcaption>Summing amplifier</figcaption>
</figure>
</div>
<p>Transfer function:</p>
<p><span class="math display">\[
V_{\text{out}} = -\left[ \frac{R_2}{R_1} V_1 + \frac{R_2}{R_3} V_2 \right] \tag{34}
\]</span></p>
<p>Special cases:</p>
<ul>
<li><span class="math inline">\(R_1 = R_2 = R_3\)</span> → <span class="math inline">\(V_{\text{out}} = -(V_1 + V_2)\)</span> (inverted sum)</li>
<li>Other resistor choices provide <strong>weighted sums</strong> or averages</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Summing amplifiers are useful for:</p>
<ul>
<li>Adding a <strong>DC offset</strong> (bias) to a signal</li>
<li>Mixing multiple sensor signals</li>
<li>Implementing simple DACs (weighted binary inputs)</li>
</ul>
</div>
</div>
</div>
<aside class="notes">
<p>Tie this to digital‑to‑analog conversion: A R‑2R ladder plus an op amp summing node can form a DAC. Also connect to Example 18 in the text (implementing <span class="math inline">\(V_{\text{out}} = 3.4V_{\text{in}} + 5\)</span> using a summing amplifier followed by an inverter).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-implementing-v_-3.4v_-5" class="slide level2 scrollable">
<h2>Example: Implementing ( V_{} = 3.4V_{} + 5 )</h2>
<p>Strategy (as described in text):</p>
<ol type="1">
<li>Use a summing amplifier with two inputs: <span class="math inline">\(V_{\text{in}}\)</span> and a fixed 5 V.
<ul>
<li>Gains chosen so output after the summing stage is <span class="math inline">\(-(3.4V_{\text{in}} + 5)\)</span>.</li>
</ul></li>
<li>Follow with an inverting amplifier of gain −1 to remove the sign.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/b0d6df631c7f68a449d0a16ccf4c6e86_MD5.jpg" height="260"></p>
<figcaption>Circuit for Example 18</figcaption>
</figure>
</div>
<p>Resistor selection uses the same “mA and kΩ” philosophy.</p>
<aside class="notes">
<p>Ask students to sketch numerical resistor values: - Suppose we choose <span class="math inline">\(R_{\text{f}} = 10\)</span> kΩ. - For input 1 (signal), choose <span class="math inline">\(R_1\)</span> so that <span class="math inline">\(R_{\text{f}}/R_1 = 3.4\)</span>. - For input 2 (5 V), choose <span class="math inline">\(R_3\)</span> so that <span class="math inline">\(R_{\text{f}}/R_3 = 1\)</span>. Then add a unity‑gain inverting stage.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="noninverting-amplifier" class="slide level2">
<h2>5.3 Noninverting Amplifier</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/a94ef9749376254e74d5e931d2050cbb_MD5.jpg" height="260"></p>
<figcaption>Noninverting amplifier</figcaption>
</figure>
</div>
<ul>
<li>Input <span class="math inline">\(V_{\text{in}}\)</span> applied to noninverting (+) input</li>
<li>Feedback and reference resistors <span class="math inline">\(R_2\)</span> and <span class="math inline">\(R_1\)</span> form a divider from <span class="math inline">\(V_{\text{out}}\)</span> to ground</li>
<li>Summing point at inverting input has voltage <span class="math inline">\(V_S\)</span></li>
</ul>
<p>KCL at node S and ideal equality <span class="math inline">\(V_- = V_+ = V_{\text{in}}\)</span>:</p>
<p><span class="math display">\[
\frac{V_{\text{in}}}{R_1} + \frac{V_{\text{in}} - V_{\text{out}}}{R_2} = 0
\]</span></p>
<p>Solving:</p>
<p><span class="math display">\[
V_{\text{out}} = \left[1 + \frac{R_2}{R_1}\right] V_{\text{in}} \tag{35}
\]</span></p>
<ul>
<li>Gain ≥ 1, <strong>cannot attenuate</strong></li>
<li>Input impedance: very high (≈ op amp input Z)</li>
<li>Output impedance: low</li>
</ul>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Use noninverting amplifiers when you need <strong>high input impedance</strong> and <strong>positive gain</strong> (no phase inversion).</p>
</div>
</div>
</div>
<aside class="notes">
<p>Connect to sensor interfaces: if your sensor is a weak voltage source, you typically buffer it (voltage follower) or amplify it using a noninverting stage. Also mention that to attenuate you must either use a passive divider or an inverting stage with <span class="math inline">\(R_2 &lt; R_1\)</span>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-noninverting-gain-of-42" class="slide level2">
<h2>Example: Noninverting Gain of 42</h2>
<p>Design a high‑impedance amplifier with voltage gain 42.</p>
<p>We use:</p>
<p><span class="math display">\[
V_{\text{out}} = \left[1 + \frac{R_2}{R_1}\right] V_{\text{in}}
\]</span></p>
<p>So</p>
<p><span class="math display">\[
42 = 1 + \frac{R_2}{R_1} \Rightarrow R_2 = 41 R_1
\]</span></p>
<p>Choose <span class="math inline">\(R_1 = 1\,\text{k}\Omega\)</span>, then <span class="math inline">\(R_2 = 41\,\text{k}\Omega\)</span>.</p>
<ul>
<li>Input impedance ≈ op amp input impedance (&gt;&gt; MΩ).</li>
</ul>
<aside class="notes">
<p>You can ask students: could we instead choose <span class="math inline">\(R_1 = 2\)</span> kΩ and <span class="math inline">\(R_2 = 82\)</span> kΩ? Yes; the gain is still 42. Discuss tradeoffs in resistor sizes (noise, bias current effects).</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="differential-amplifier-core-concept" class="slide level2">
<h2>5.4 Differential Amplifier – Core Concept</h2>
<p>Goal: Amplify the <strong>difference</strong> between two voltages while rejecting any <strong>common‑mode</strong> voltage.</p>
<p>Ideal relationship:</p>
<p><span class="math display">\[
V_{\text{out}} = A (V_a - V_b) \tag{36}
\]</span></p>
<p>Common‑mode input voltage:</p>
<p><span class="math display">\[
V_{cm} = \frac{V_a + V_b}{2} \tag{37}
\]</span></p>
<p>Common‑mode rejection ratio (CMRR):</p>
<p><span class="math display">\[
\text{CMRR} = \frac{A}{A_{cm}} \tag{38}
\]</span></p>
<p>Common‑mode rejection (CMR) in dB:</p>
<p><span class="math display">\[
\text{CMR} = 20 \log_{10}(\text{CMRR}) \tag{39}
\]</span></p>
<p>Typical CMR for instrumentation amplifiers: <strong>60–100 dB</strong>.</p>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>High CMR is critical when your sensor signal is <strong>small</strong> but rides on a <strong>large common‑mode</strong> voltage (e.g., Wheatstone bridge outputs, biomedical electrodes, strain gauges).</p>
</div>
</div>
</div>
<aside class="notes">
<p>Use simple numeric examples given in the text to show that a 0.1 V difference on 7.8 V vs.&nbsp;7.7 V and −2.4 V vs.&nbsp;−2.5 V all yield the same differential output, while an ideal differential amplifier ignores the large common level.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="differential-amplifier-circuit" class="slide level2">
<h2>Differential Amplifier Circuit</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/420be05c226d015cb08af5d59f276056_MD5.jpg" height="260"></p>
<figcaption>Differential amplifier</figcaption>
</figure>
</div>
<ul>
<li>Requires two pairs of matched resistors: <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span> on each side</li>
<li>Ideal transfer function (Appendix 6 derivation):</li>
</ul>
<p><span class="math display">\[
V_{\text{out}} = \frac{R_2}{R_1} (V_2 - V_1) \tag{40}
\]</span></p>
<p>Notes:</p>
<ul>
<li><strong>Resistor matching quality</strong> strongly affects CMR.</li>
<li>Input impedances are not very high and <strong>not equal</strong> between inputs.</li>
<li>For instrumentation, we often add <strong>input buffers</strong> to make input impedance high and symmetric.</li>
</ul>
<aside class="notes">
<p>Discuss practical implementation: often use thin‑film resistor networks with tight ratio tolerances (0.01% or better) to achieve high CMR. Point out that with discrete 1% resistors, the achievable CMR can be limited by mismatch.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="instrumentation-amplifier-buffered-differential-amp" class="slide level2">
<h2>Instrumentation Amplifier – Buffered Differential Amp</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/bcd4c220fd7c21ca8ac4102543f1990a_MD5.jpg" height="260"></p>
<figcaption>Instrumentation amplifier with followers</figcaption>
</figure>
</div>
<ul>
<li>Add <strong>voltage followers</strong> (buffers) before differential stage:
<ul>
<li>Greatly increases input impedance (ideal for sensor bridges).</li>
<li>Input loading becomes negligible.</li>
</ul></li>
<li>Transfer function remains:</li>
</ul>
<p><span class="math display">\[
V_{\text{out}} = \frac{R_2}{R_1} (V_2 - V_1) \tag{40 again}
\]</span></p>
<p>Disadvantage:</p>
<ul>
<li>Changing gain requires changing <strong>both</strong> <span class="math inline">\(R_1\)</span> resistors and keeping them matched.</li>
</ul>
<aside class="notes">
<p>Mention that many “3‑op‑amp instrumentation amplifier” ICs are based on this concept, but use a clever input stage to allow gain to be set by a <strong>single resistor</strong>. That configuration appears in Figure 37 later.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-20-sensor-20250-mv-05-v" class="slide level2">
<h2>Example 20 – Sensor 20–250 mV → 0–5 V</h2>
<p>Sensor: <span class="math inline">\(V_{\text{in}}\)</span> from 20 mV to 250 mV. Desired: <span class="math inline">\(V_{\text{out}}\)</span> from 0 to 5 V, very high input impedance.</p>
<p>Model: linear relationship</p>
<p><span class="math display">\[
V_{\text{out}} = m V_{\text{in}} + V_0
\]</span></p>
<p>Use two points:</p>
<p><span class="math display">\[
\begin{aligned}
0 &amp;= m(0.020) + V_0 \\
5 &amp;= m(0.250) + V_0
\end{aligned}
\]</span></p>
<p>Solve:</p>
<ul>
<li><span class="math inline">\(V_0 = -0.434\)</span> V</li>
<li><span class="math inline">\(m = 21.7\)</span></li>
</ul>
<p>So:</p>
<p><span class="math display">\[
V_{\text{out}} = 21.7 V_{\text{in}} - 0.434
\]</span></p>
<p>Alternative form:</p>
<p><span class="math display">\[
V_{\text{out}} = 21.7(V_{\text{in}} - 0.02)
\]</span></p>
<p>This looks like:</p>
<ul>
<li>Differential amplifier with gain 21.7</li>
<li>Fixed 0.02 V offset applied to inverting input</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/6deb6d2a373874e46f8518e1fa160469_MD5.jpg" height="260"></p>
<figcaption>Solution circuit Example 20</figcaption>
</figure>
</div>
<aside class="notes">
<p>Point out how a <strong>zener diode</strong> plus resistor divider is used to create a stable 0.02 V reference, so supply variations don’t distort the mapping. Also highlight that an off‑the‑shelf instrumentation amplifier IC could implement this with fewer discrete parts.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="instrumentation-amplifier-with-single-gain-resistor" class="slide level2">
<h2>Instrumentation Amplifier with Single Gain Resistor</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/6eb0e4ce25420f0e3e3b151039959a8d_MD5.jpg" height="260"></p>
<figcaption>3-op-amp instrumentation amplifier</figcaption>
</figure>
</div>
<ul>
<li>Two input stages: noninverting amplifiers with shared gain‑setting resistor <span class="math inline">\(R_G\)</span></li>
<li>Third stage: differential amplifier with resistors <span class="math inline">\(R_2\)</span> and <span class="math inline">\(R_3\)</span></li>
</ul>
<p>Transfer function:</p>
<p><span class="math display">\[
V_{\text{out}} = \left(1 + \frac{2R_1}{R_G}\right)\left(\frac{R_3}{R_2}\right)(V_2 - V_1) \tag{41}
\]</span></p>
<p>Advantages:</p>
<ul>
<li><strong>Gain adjusted by single resistor <span class="math inline">\(R_G\)</span></strong></li>
<li>High input impedance</li>
<li>High CMR, mainly dependent on matching of <span class="math inline">\(R_2\)</span> and <span class="math inline">\(R_3\)</span></li>
</ul>
<p>Many IC instrumentation amplifiers (e.g., AD620, INA128) use this topology.</p>
<aside class="notes">
<p>Explain that IC manufacturers can laser‑trim <span class="math inline">\(R_2\)</span> and <span class="math inline">\(R_3\)</span> on‑chip to excellent matching, so the user just chooses <span class="math inline">\(R_G\)</span> to set the desired gain without sacrificing CMR.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-21-instrumenting-a-wheatstone-bridge" class="slide level2">
<h2>Example 21 – Instrumenting a Wheatstone Bridge</h2>
<p>Bridge (Figure 38): <span class="math inline">\(R_4\)</span> varies from 100 Ω to 102 Ω.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/0ba04e2460688aa1f7edd05262d3b427_MD5.jpg" height="260"></p>
<figcaption>Bridge</figcaption>
</figure>
</div>
<p>Bridge voltage: <span class="math inline">\(V_a - V_b = \Delta V\)</span>.</p>
<p>At <span class="math inline">\(R_4 = 102\,\Omega\)</span> and <span class="math inline">\(R_1 = R_2 = R_3 = 100\,\Omega\)</span>, supply = 5 V:</p>
<p><span class="math display">\[
\Delta V = 5\left[\frac{100}{100+100} - \frac{102}{100+102}\right] = -24.75\text{ mV}
\]</span></p>
<p>Need: <span class="math inline">\(V_{\text{out}} = 0\)</span> V at 100 Ω, <span class="math inline">\(V_{\text{out}} = 2.5\)</span> V at 102 Ω.</p>
<p>So differential gain:</p>
<p><span class="math display">\[
A = \frac{2.5\text{ V}}{24.75\text{ mV}} \approx 101
\]</span></p>
<p>Using Eq. (41) with <span class="math inline">\(R_2 = R_3 = 1\text{ k}\Omega\)</span>, <span class="math inline">\(R_1 = 100\text{ k}\Omega\)</span>:</p>
<p><span class="math display">\[
101 = \left(1 + \frac{2 \cdot 100{,}000}{R_G}\right)\left(\frac{1000}{1000}\right)
\]</span></p>
<p>Solve for <span class="math inline">\(R_G\)</span>:</p>
<p><span class="math display">\[
R_G = 2000\,\Omega
\]</span></p>
<p>Polarity: connect bridge nodes such that <span class="math inline">\(V_b\)</span> goes to the input that yields positive output as <span class="math inline">\(R_4\)</span> increases.</p>
<aside class="notes">
<p>Have students sanity‑check: a 2% change in resistance (100 → 102 Ω) yields only 24.75 mV at the bridge, which must be amplified by ≈ 100× to reach 2.5 V — a classic instrumentation amplifier application.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="voltagetocurrent-converter" class="slide level2">
<h2>5.5 Voltage‑to‑Current Converter</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/f9c3a9e2a809c831e85e9bd74f8258fe_MD5.jpg" height="260"></p>
<figcaption>V-to-I converter</figcaption>
</figure>
</div>
<p>Used to drive <strong>4–20 mA current loops</strong> from a voltage signal.</p>
<p>Transfer function (Appendix 6):</p>
<p><span class="math display">\[
I = -\frac{R_2}{R_1 R_3} V_{\text{in}} \tag{42}
\]</span></p>
<p>Condition on resistors:</p>
<p><span class="math display">\[
R_1(R_3 + R_5) = R_2 R_4 \tag{43}
\]</span></p>
<p>Maximum load resistance <span class="math inline">\(R_{ml}\)</span> before saturation:</p>
<p><span class="math display">\[
R_{ml} = \frac{(R_4 + R_5)\left[\dfrac{V_{\text{sat}}}{I_m} - R_3\right]}{R_3 + R_4 + R_5} \tag{44}
\]</span></p>
<ul>
<li><span class="math inline">\(I_m\)</span> is maximum desired output current</li>
<li><span class="math inline">\(V_{\text{sat}}\)</span> is op amp saturation voltage</li>
</ul>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>In instrumentation, <strong>current loops</strong> are robust to long cable runs and noise, so V–I converters are used at the transmitter end to convert local sensor voltage to a standardized current signal.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Emphasize that Eq. (44) shows <span class="math inline">\(R_{ml} &lt; V_{\text{sat}}/I_m\)</span> always, due to internal voltage drops.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-22-01-v-to-010-ma-converter" class="slide level2 scrollable">
<h2>Example 22 – 0–1 V to 0–10 mA Converter</h2>
<p>Requirements:</p>
<ul>
<li>Input: 0–1 V signal</li>
<li>Output: 0–10 mA current</li>
<li>Op amp saturation: ±10 V</li>
</ul>
<p>Strategy:</p>
<ol type="1">
<li><p>The V–I converter inverts (negative sign in Eq. 42), so we first invert the 0–1 V to 0 to −1 V with a simple inverting amplifier.</p></li>
<li><p>Choose <span class="math inline">\(R_1 = R_2\)</span> in the V–I converter:</p>
<p>Then Eq. (42) becomes: <span class="math display">\[
I = -\frac{R_2}{R_1 R_3}V_{\text{in}} = -\frac{1}{R_3}V_{\text{in}}
\]</span></p></li>
<li><p>For 10 mA at 1 V (actually −1 V at the converter input):</p>
<p><span class="math display">\[
R_3 = \frac{1\text{ V}}{10\text{ mA}} = 100\,\Omega
\]</span></p></li>
<li><p>Choose <span class="math inline">\(R_5 = 0\)</span> so Eq. (43) simplifies to <span class="math inline">\(R_1 R_3 = R_2 R_4\)</span>. With <span class="math inline">\(R_1=R_2\)</span>, we get <span class="math inline">\(R_3 = R_4 = 100\,\Omega\)</span>.</p></li>
<li><p>Maximum load resistance (Eq. 44):</p>
<p><span class="math display">\[
R_{ml} = 100\left[\frac{10\text{ V}}{10\text{ mA}} - 100\right] / 200 = 450\,\Omega
\]</span></p></li>
</ol>
<p>So the loop can drive up to 10 mA into a 450 Ω load.</p>
<aside class="notes">
<p>Ask: what happens if the cable and receiver resistance exceed 450 Ω? The op amp will saturate before delivering full 10 mA, causing a <strong>nonlinear</strong> transfer and limiting measurement range.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="currenttovoltage-converter" class="slide level2">
<h2>5.6 Current‑to‑Voltage Converter</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/900ffb1907a3d62101a7e852c84d118f_MD5.jpg" height="260"></p>
<figcaption>I-to-V converter</figcaption>
</figure>
</div>
<p>At the receiving end of a current loop, convert current back to a voltage:</p>
<ul>
<li>Sensor loop current <span class="math inline">\(I\)</span> flows into the summing node through <span class="math inline">\(R\)</span>.</li>
<li>Op amp adjusts <span class="math inline">\(V_{\text{out}}\)</span> to keep input node at virtual ground.</li>
</ul>
<p>Transfer function:</p>
<p><span class="math display">\[
V_{\text{out}} = -I R \tag{45}
\]</span></p>
<ul>
<li>Very linear as long as op amp does not saturate</li>
<li>Choose <span class="math inline">\(R\)</span> so that max current yields desired output range</li>
</ul>
<aside class="notes">
<p>Give a simple design: for 4–20 mA loop and required 1–5 V output, choose <span class="math inline">\(R\)</span> such that: - 4 mA → 1 V, 20 mA → 5 V → <span class="math inline">\(R = 5\text{ V}/20\text{ mA} = 250\,\Omega\)</span>. Then 4 mA yields 1 V automatically.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="integrator" class="slide level2">
<h2>5.7 Integrator</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/e9b09afcde36e89724b4a5494aef38fb_MD5.jpg" height="260"></p>
<figcaption>Integrator</figcaption>
</figure>
</div>
<ul>
<li>Input resistor <span class="math inline">\(R\)</span></li>
<li>Feedback capacitor <span class="math inline">\(C\)</span></li>
</ul>
<p>Summing node equation (ideal op amp):</p>
<p><span class="math display">\[
\frac{V_{\text{in}}}{R} + C\frac{dV_{\text{out}}}{dt} = 0 \tag{46}
\]</span></p>
<p>Integrate both sides:</p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{1}{RC} \int V_{\text{in}}\,dt \tag{47}
\]</span></p>
<p>If <span class="math inline">\(V_{\text{in}}\)</span> is a constant <span class="math inline">\(K\)</span>:</p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{K}{RC} t \tag{48}
\]</span></p>
<p>→ Ideal <strong>ramp generator</strong> with slope <span class="math inline">\(-K/(RC)\)</span>.</p>
<div class="callout callout-caution callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Caution</strong></p>
</div>
<div class="callout-content">
<p>In practice, integrators need <strong>reset/clamp circuits</strong> and often a resistor in parallel with <span class="math inline">\(C\)</span> to prevent drift and saturation from DC offsets.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Mention uses: numerical integration of accelerometer signals to get velocity, implementing analog filters, ramp generators in timing circuits.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-23-10-vms-ramp" class="slide level2">
<h2>Example 23 – 10 V/ms Ramp</h2>
<p>Goal: ramp increasing at 10 V/ms.</p>
<p>Desired:</p>
<p><span class="math display">\[
\frac{dV_{\text{out}}}{dt} = 10\text{ V/ms}
\]</span></p>
<p>Use integrator:</p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{V_{\text{in}}}{RC} t
\]</span></p>
<p>Let <span class="math inline">\(RC = 1\)</span> ms and <span class="math inline">\(V_{\text{in}} = -10\)</span> V. Then:</p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{-10}{1\text{ ms}} t = 10\frac{\text{V}}{\text{ms}}t
\]</span></p>
<p>Example component choices:</p>
<ul>
<li><span class="math inline">\(R = 1\,\text{k}\Omega\)</span>, <span class="math inline">\(C = 1\,\mu\text{F}\)</span> → <span class="math inline">\(RC = 1\)</span> ms</li>
</ul>
<aside class="notes">
<p>Stress that in practice the ramp cannot grow forever; the op amp saturates at some ±<span class="math inline">\(V_{\text{sat}}\)</span>. A reset (switching <span class="math inline">\(C\)</span> to discharge) is often used.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="differentiator" class="slide level2">
<h2>5.8 Differentiator</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/6de9467a89151b0726ec3acdfaded7d2_MD5.jpg" height="260"></p>
<figcaption>Differentiator</figcaption>
</figure>
</div>
<ul>
<li>Capacitor in series at input, resistor in feedback</li>
</ul>
<p>Summing node equation:</p>
<p><span class="math display">\[
C\frac{dV_{\text{in}}}{dt} + \frac{V_{\text{out}}}{R} = 0 \tag{49}
\]</span></p>
<p>Solve for <span class="math inline">\(V_{\text{out}}\)</span>:</p>
<p><span class="math display">\[
V_{\text{out}} = -RC\frac{dV_{\text{in}}}{dt} \tag{50}
\]</span></p>
<p>So output is proportional to the <strong>time derivative</strong> of <span class="math inline">\(V_{\text{in}}\)</span>.</p>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Real differentiators tend to be <strong>noisy and unstable</strong>: they amplify high‑frequency noise and any fast transients. They are typically used only as part of more complex, bandwidth‑limited circuits.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Explain that in practice we use “practical differentiator” circuits that add series/parallel resistors and capacitors to limit gain at high frequency, essentially implementing a band‑limited differentiator.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="op-amp-linearization-nonlinear-circuits" class="slide level2">
<h2>5.9 Op Amp Linearization &amp; Nonlinear Circuits</h2>
<p>Idea: place a <strong>nonlinear element</strong> in the feedback loop of an op amp.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/316c759a8a908f954a28272499b7faa4_MD5.jpg" height="260"></p>
<figcaption>Nonlinear amplifier</figcaption>
</figure>
</div>
<p>Summing point equation:</p>
<p><span class="math display">\[
\frac{V_{\text{in}}}{R} + I(V_{\text{out}}) = 0 \tag{51}
\]</span></p>
<p>Solve for <span class="math inline">\(V_{\text{out}}\)</span>:</p>
<p><span class="math display">\[
V_{\text{out}} = G\left(\frac{V_{\text{in}}}{R}\right) \tag{52}
\]</span></p>
<p>Where <span class="math inline">\(G\)</span> is related to the <strong>inverse</strong> of <span class="math inline">\(I(V_{\text{out}})\)</span>.</p>
<p>Example: diode in feedback → logarithmic amplifier.</p>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/ae8c7b13b69768a966d44e25548ef223_MD5.jpg" height="260"></p>
<figcaption>Diode feedback log amp</figcaption>
</figure>
</div>
<p>Diode equation:</p>
<p><span class="math display">\[
I(V_{\text{out}}) = I_0 \exp(\alpha V_{\text{out}}) \tag{53}
\]</span></p>
<p>Substituting and inverting:</p>
<p><span class="math display">\[
V_{\text{out}} = \frac{1}{\alpha}\ln(V_{\text{in}}) - \frac{1}{\alpha}\ln(I_0 R) \tag{54}
\]</span></p>
<p>→ Output is <strong>logarithmic</strong> in input.</p>
<aside class="notes">
<p>Mention uses of log amps: - Expanding dynamic range (e.g., audio compression, power meters) - Converting multiplication/division to addition/subtraction in analog computers. Linearization: by appropriately choosing or designing nonlinear feedback, you can make a nonlinear sensor’s output more nearly linear.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="design-guidelines-for-analog-signal-conditioning" class="slide level2 scrollable">
<h2>6. Design Guidelines for Analog Signal Conditioning</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/71d4d43aa4dab787bc20f373a5f5c176_MD5.jpg" height="260"></p>
<figcaption>Measurement &amp; S/C model</figcaption>
</figure>
</div>
<p>General workflow:</p>
<ol type="1">
<li><strong>Define the measurement objective</strong></li>
<li><strong>Select the sensor</strong> (if not fixed)</li>
<li><strong>Design the analog S/C</strong> block</li>
<li>Check accuracy, loading, noise, and practical constraints</li>
</ol>
<p>We’ll summarize each step as a design checklist.</p>
<aside class="notes">
<p>Encourage students to explicitly write each of these items when given a design problem; it clarifies assumptions and avoids hidden requirements.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="step-1-define-the-measurement-objective" class="slide level2 scrollable">
<h2>Step 1 – Define the Measurement Objective</h2>
<ol type="1">
<li><strong>Parameter</strong>
<ul>
<li>What are we measuring? Temperature, pressure, flow, position, voltage, current…</li>
</ul></li>
<li><strong>Range</strong>
<ul>
<li>Min/max of the physical variable: e.g., 100–200 °C, 45–85 psi.</li>
</ul></li>
<li><strong>Accuracy</strong>
<ul>
<li>Required error bounds: e.g., ±5% full scale (FS), ±3% of reading.</li>
</ul></li>
<li><strong>Linearity</strong>
<ul>
<li>Must the mapping from parameter to output be linear?</li>
</ul></li>
<li><strong>Noise environment</strong>
<ul>
<li>Expected interference (EMI), frequency content, and noise levels.</li>
</ul></li>
</ol>
<div class="callout callout-tip callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>Clearly stating these <strong>before</strong> drawing circuits avoids under‑ or over‑design (e.g., using an ultra‑precision amp when 5% error is acceptable).</p>
</div>
</div>
</div>
<aside class="notes">
<p>Give a quick example: - “Measure water level between 0.5–2.0 m with ±1 cm accuracy; output 1–5 V; environment: industrial plant with motor noise.” From this, we know we need good EMI immunity, likely shielded cables and filtering.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="step-2-understand-select-the-sensor" class="slide level2 scrollable">
<h2>Step 2 – Understand / Select the Sensor</h2>
<p>If the sensor is given, document its characteristics; if not, choose an appropriate one.</p>
<ol type="1">
<li><strong>Output parameter</strong>
<ul>
<li>Does the sensor produce resistance, voltage, current, frequency, etc.?</li>
</ul></li>
<li><strong>Transfer function</strong>
<ul>
<li>Relationship between input (physical) and output (electrical).</li>
<li>Linear? Nonlinear? Given by equation or table?</li>
</ul></li>
<li><strong>Time response</strong>
<ul>
<li>First‑order time constant, 2nd‑order dynamics, bandwidth.</li>
</ul></li>
<li><strong>Range</strong>
<ul>
<li>Range of sensor output over measurement range.</li>
</ul></li>
<li><strong>Power limits</strong>
<ul>
<li>Max dissipation, max current/voltage, self‑heating constraints.</li>
</ul></li>
</ol>
<aside class="notes">
<p>Highlight that many sensor datasheets specify maximum excitation current or power; exceeding that can change the reading (self‑heating) or permanently damage the sensor.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="step-3-design-the-analog-signal-conditioning" class="slide level2 scrollable">
<h2>Step 3 – Design the Analog Signal Conditioning</h2>
<ol type="1">
<li><strong>Desired output parameter</strong>
<ul>
<li>Usually a <strong>voltage</strong> for ADCs (e.g., 0–5 V, ±10 V).</li>
<li>Sometimes current (4–20 mA) or frequency.</li>
</ul></li>
<li><strong>Output range</strong>
<ul>
<li>Ensure mapping covers full ADC input range for better resolution.</li>
</ul></li>
<li><strong>Input impedance of S/C</strong>
<ul>
<li>Must not excessively load sensor or bridge.</li>
</ul></li>
<li><strong>Output impedance of S/C</strong>
<ul>
<li>Must be low enough for the next stage (ADC, recorder, actuator driver).</li>
</ul></li>
</ol>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>For voltage‑output sensors, <strong>high input impedance</strong> is often crucial. For bridge‑based sensors, design excitation and bridge resistances to respect sensor power limits and linearity.</p>
</div>
</div>
</div>
<aside class="notes">
<p>Reinforce the “develop an equation first” approach: Write <span class="math inline">\(V_{\text{out}} = m (\text{sensor variable}) + V_0\)</span>, then implement it with op amp blocks.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="step-4-additional-analog-sc-design-notes" class="slide level2 scrollable">
<h2>Step 4 – Additional Analog S/C Design Notes</h2>
<ol type="a">
<li>If input is a <strong>resistance change</strong> (e.g., RTD, strain gauge):</li>
</ol>
<ul>
<li>Design the bridge/divider carefully:
<ul>
<li>Check nonlinearity of bridge output vs.&nbsp;resistance.</li>
<li>Verify sensor self‑heating power is within limits.</li>
</ul></li>
</ul>
<ol start="2" type="a">
<li>For the op amp section:</li>
</ol>
<ul>
<li>Start with a <strong>static transfer function</strong> (equation, straight line).</li>
<li>Then choose topologies (inverting, noninverting, summing, differential).</li>
</ul>
<ol start="3" type="a">
<li>Always verify <strong>loading effects</strong>:</li>
</ol>
<ul>
<li>Does S/C input load the sensor?</li>
<li>Does S/C output properly drive the load/ADC?</li>
</ul>
<aside class="notes">
<p>Encourage students to always sketch a simple block diagram before going into component‑level detail; then annotate each block with its assumed input/output impedance, gain, and ranges.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-24-2.4-to-1.1-v-0-to-2.5-v" class="slide level2">
<h2>Example 24 – −2.4 to −1.1 V → 0 to 2.5 V</h2>
<p>We only know we need a voltage‑to‑voltage conversion; sensor details are unknown.</p>
<ul>
<li>Good practice: assume <strong>high source impedance</strong> → design high input Z using a voltage follower.</li>
</ul>
<p>Model:</p>
<p><span class="math display">\[
V_{\text{out}} = m V_{\text{in}} + V_0
\]</span></p>
<p>Using:</p>
<p><span class="math display">\[
\begin{aligned}
0 &amp;= -2.4 m + V_0 \\
2.5 &amp;= -1.1 m + V_0
\end{aligned}
\]</span></p>
<p>From first: <span class="math inline">\(V_0 = 2.4m\)</span>. Sub into second:</p>
<p><span class="math display">\[
2.5 = -1.1 m + 2.4 m = 1.3 m \Rightarrow m = 1.923
\]</span></p>
<p>Then <span class="math inline">\(V_0 = 4.615\)</span> V, so:</p>
<p><span class="math display">\[
V_{\text{out}} = 1.923 V_{\text{in}} + 4.615
\]</span></p>
<p>One implementation (Figure 46):</p>
<ul>
<li>Input buffer (voltage follower) → high input Z</li>
<li>Summing amplifier → implements <span class="math inline">\(1.923 V_{\text{in}} + 4.615\)</span> (but inverted)</li>
<li>Inverting amplifier → flips sign back</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/b6dedccb57bff08e3e47f1240d9661c0_MD5.jpg" height="260"></p>
<figcaption>Solution Example 24</figcaption>
</figure>
</div>
<aside class="notes">
<p>Note the use of resistor dividers and trimmer potentiometers to create the 4.615 V bias, assuming a 15 V supply. Prompt students to design the alternative approach using a differential amplifier as suggested: <span class="math inline">\(V_{\text{out}} = 1.923 (V_{\text{in}} + 2.4)\)</span> → instrumentation or differential amplifier with a fixed 2.4 V on one input.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="example-25-temperature-measurement-system" class="slide level2">
<h2>Example 25 – Temperature Measurement System</h2>
<p>Given:</p>
<ul>
<li>Temperature range: 250–450 °C</li>
<li>Accuracy: ±2 °C</li>
<li>Sensor: resistance varies <strong>linearly</strong> from 280 Ω to 1060 Ω over that range</li>
<li>Max sensor power: 5 mW</li>
<li>Desired output: −5 to +5 V, linear</li>
<li>Load: high‑impedance recorder</li>
</ul>
<h3 id="step-1-limit-sensor-power">Step 1 – Limit Sensor Power</h3>
<p>Power:</p>
<p><span class="math display">\[
P = I^2 R
\]</span></p>
<p>At maximum resistance (1060 Ω), limiting case:</p>
<p><span class="math display">\[
I_{\max} = \sqrt{\frac{0.005}{1060}} \approx 2.17\text{ mA}
\]</span></p>
<p>So design such that sensor current <strong>always</strong> &lt; 2 mA.</p>
<h3 id="step-2-transfer-function">Step 2 – Transfer Function</h3>
<p>Relate <span class="math inline">\(V_{\text{out}}\)</span> to <span class="math inline">\(R_s\)</span>.</p>
<p>Model:</p>
<p><span class="math display">\[
V_{\text{out}} = m R_s + V_0
\]</span></p>
<p>Two conditions:</p>
<p><span class="math display">\[
\begin{aligned}
-5 &amp;= 280m + V_0 \\
+5 &amp;= 1060m + V_0
\end{aligned}
\]</span></p>
<p>Subtract:</p>
<p><span class="math display">\[
10 = 780m \Rightarrow m = 0.0128
\]</span></p>
<p>Then:</p>
<p><span class="math display">\[
V_0 = -5 - 280(0.0128) = -8.58
\]</span></p>
<p>So:</p>
<p><span class="math display">\[
V_{\text{out}} = 0.0128 R_s - 8.58
\]</span></p>
<h3 id="step-3-circuit-realization">Step 3 – Circuit Realization</h3>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/chapter_2/354fb74f95c05a9af9df6c8ca97f57ed_MD5.jpg" height="260"></p>
<figcaption>Solution Example 25</figcaption>
</figure>
</div>
<ul>
<li>Use an inverting amplifier with sensor <span class="math inline">\(R_s\)</span> in feedback and a fixed input of 1 V through 1 kΩ → sensor current = 1 mA (&lt; 2 mA).</li>
<li>Follow with a second stage (inverting summer) to achieve the correct offset and sign.</li>
<li>Trimmer resistors used to precisely set 1.00 V and 8.58 V biases.</li>
</ul>
<aside class="notes">
<p>Emphasize: the first stage essentially converts resistance to voltage linearly (via <span class="math inline">\(V = I R_s\)</span>), while keeping current safe. The second stage re‑scales and offsets that voltage to the desired −5 to +5 V window. Remind students that there are multiple valid designs (e.g., bridge + instrumentation amplifier). Cost, complexity, and accuracy tradeoffs decide which is best.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="summary-key-points" class="slide level2 scrollable">
<h2>Summary / Key Points</h2>
<ul>
<li>Op amps are <strong>universal analog building blocks</strong> widely used in instrumentation.</li>
<li>Ideal op amp analysis relies on:
<ol type="1">
<li>No input currents.</li>
<li>Equal input voltages under negative feedback.</li>
</ol></li>
<li>Basic configurations:
<ul>
<li><strong>Voltage follower</strong> – buffer, unity gain, high input Z.</li>
<li><strong>Inverting amplifier</strong> – gain <span class="math inline">\(-R_2/R_1\)</span>, input Z ≈ <span class="math inline">\(R_1\)</span>.</li>
<li><strong>Noninverting amplifier</strong> – gain <span class="math inline">\(1 + R_2/R_1\)</span>, high input Z.</li>
<li><strong>Summing amplifier</strong> – weighted sum and DC offset.</li>
</ul></li>
<li>Real op amps have finite:
<ul>
<li>Gain, bandwidth, slew rate, and nonzero offsets and bias currents.</li>
</ul></li>
<li>Instrumentation amplifiers provide:
<ul>
<li>High input Z, adjustable gain, and high common‑mode rejection.</li>
<li>Ideal for bridge and low‑level sensor signals.</li>
</ul></li>
<li>V–I and I–V converters implement standardized <strong>current loops</strong>.</li>
<li>Integrators and differentiators implement time‑domain operations (with practical stability considerations).</li>
<li>Good design practice:
<ul>
<li>Work from <strong>equations</strong> first.</li>
<li>Consider <strong>loading</strong>, <strong>power limits</strong>, and <strong>noise</strong>.</li>
<li>“Think mA and kΩ” for op amp resistor values.</li>
</ul></li>
</ul>
<aside class="notes">
<p>Use this slide to recap and connect back to the learning objectives. Ask students: which op amp configuration would you choose to (a) buffer a sensor, (b) amplify a bridge output with high common‑mode noise, (c) implement a 4–20 mA transmitter, and (d) generate a ramp voltage?</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="formula-summary" class="slide level2">
<h2>Formula Summary</h2>
<p><strong>Ideal Inverting Amplifier</strong></p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{R_2}{R_1} V_{\text{in}} \tag{31}
\]</span></p>
<p><strong>Noninverting Amplifier</strong></p>
<p><span class="math display">\[
V_{\text{out}} = \left[1 + \frac{R_2}{R_1}\right] V_{\text{in}} \tag{35}
\]</span></p>
<p><strong>Summing Amplifier (two inputs)</strong></p>
<p><span class="math display">\[
V_{\text{out}} = -\left[ \frac{R_2}{R_1} V_1 + \frac{R_2}{R_3} V_2 \right] \tag{34}
\]</span></p>
<p><strong>Differential Amplifier / Basic Instrumentation Amp</strong></p>
<p><span class="math display">\[
V_{\text{out}} = \frac{R_2}{R_1} (V_2 - V_1) \tag{40}
\]</span></p>
<p><strong>3‑Op‑Amp Instrumentation Amplifier</strong></p>
<p><span class="math display">\[
V_{\text{out}} = \left(1 + \frac{2R_1}{R_G}\right)\left(\frac{R_3}{R_2}\right)(V_2 - V_1) \tag{41}
\]</span></p>
</section>
<section id="formula-summary-cont." class="slide level2">
<h2>Formula Summary (cont.)</h2>
<p><strong>Voltage‑to‑Current Converter</strong></p>
<p><span class="math display">\[
I = -\frac{R_2}{R_1 R_3} V_{\text{in}} \tag{42}
\]</span></p>
<p>Resistor condition:</p>
<p><span class="math display">\[
R_1 (R_3 + R_5) = R_2 R_4 \tag{43}
\]</span></p>
<p>Maximum load resistance:</p>
<p><span class="math display">\[
R_{ml} = \frac{(R_4 + R_5)\left[\dfrac{V_{\text{sat}}}{I_m} - R_3\right]}{R_3 + R_4 + R_5} \tag{44}
\]</span></p>
<p><strong>Current‑to‑Voltage Converter</strong></p>
<p><span class="math display">\[
V_{\text{out}} = -I R \tag{45}
\]</span></p>
<p><strong>Integrator</strong></p>
<p><span class="math display">\[
V_{\text{out}} = -\frac{1}{RC} \int V_{\text{in}}\,dt \tag{47}
\]</span></p>
<p><strong>Differentiator</strong></p>
<p><span class="math display">\[
V_{\text{out}} = -RC \frac{dV_{\text{in}}}{dt} \tag{50}
\]</span></p>
<p><strong>Logarithmic Amplifier (diode feedback)</strong></p>
<p><span class="math display">\[
V_{\text{out}} = \frac{1}{\alpha}\ln(V_{\text{in}}) - \frac{1}{\alpha}\ln(I_0 R) \tag{54}
\]</span></p>
<aside class="notes">
<p>Encourage students to keep a personal “formula sheet” summarizing these relationships; in practice, engineers repeatedly reuse these few core expressions across many designs.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>


<script type="pyodide-data">
eyJvcHRpb25zIjp7ImVudiI6eyJQTE9UTFlfUkVOREVSRVIiOiJwbG90bHlfbWltZXR5cGUifSwiaW5kZXhVUkwiOiJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvcHlvZGlkZS92MC4yNy4wL2Z1bGwvIn0sInBhY2thZ2VzIjp7InBrZ3MiOlsicHlvZGlkZV9odHRwIiwibWljcm9waXAiLCJpcHl0aG9uIiwibnVtcHkiLCJwbG90bHkiLCJuYmZvcm1hdHMiXX19
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3siY2VsbE5hbWUiOiJweW9kaWRlLTEiLCJpbmxpbmUiOmZhbHNlLCJtZXRob2ROYW1lIjoiaW50ZXJwcmV0Iiwic291cmNlIjoidmlld29mIF9weW9kaWRlX2VkaXRvcl8xID0ge1xuICBjb25zdCB7IFB5b2RpZGVFeGVyY2lzZUVkaXRvciwgYjY0RGVjb2RlIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS0xLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHB5b2RpZGUtMS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBQeW9kaWRlRXhlcmNpc2VFZGl0b3IoXG4gICAgcHlvZGlkZU9qcy5weW9kaWRlUHJvbWlzZSxcbiAgICBibG9jay5jb2RlLFxuICAgIG9wdGlvbnNcbiAgKTtcblxuICByZXR1cm4gZWRpdG9yLmNvbnRhaW5lcjtcbn1cbl9weW9kaWRlX3ZhbHVlXzEgPSBweW9kaWRlT2pzLnByb2Nlc3MoX3B5b2RpZGVfZWRpdG9yXzEsIHtSMV9rLCBSMl9rfSk7XG4ifSx7ImNlbGxOYW1lIjoicHlvZGlkZS1wcmVsdWRlIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoicHlvZGlkZU9qcyA9IHtcbiAgY29uc3Qge1xuICAgIFB5b2RpZGVFdmFsdWF0b3IsXG4gICAgUHlvZGlkZUVudmlyb25tZW50TWFuYWdlcixcbiAgICBzZXR1cFB5dGhvbixcbiAgICBzdGFydFB5b2RpZGVXb3JrZXIsXG4gICAgYjY0RGVjb2RlLFxuICAgIGNvbGxhcHNlUGF0aCxcbiAgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG5cbiAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLXN0YXR1c1wiKTtcbiAgY29uc3QgaW5kaWNhdG9yQ29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJleGVyY2lzZS1sb2FkaW5nLWluZGljYXRvclwiKTtcbiAgaW5kaWNhdG9yQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJkLW5vbmVcIik7XG5cbiAgbGV0IHN0YXR1c1RleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpXG4gIHN0YXR1c1RleHQuY2xhc3NMaXN0ID0gXCJleGVyY2lzZS1sb2FkaW5nLWRldGFpbHNcIjtcbiAgc3RhdHVzVGV4dCA9IHN0YXR1c0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGF0dXNUZXh0KTtcbiAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBJbml0aWFsaXNlYDtcblxuICAvLyBIb2lzdCBpbmRpY2F0b3Igb3V0IGZyb20gZmluYWwgc2xpZGUgd2hlbiBydW5uaW5nIHVuZGVyIHJldmVhbFxuICBjb25zdCByZXZlYWxTdGF0dXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnJldmVhbCAuZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGlmIChyZXZlYWxTdGF0dXMpIHtcbiAgICByZXZlYWxTdGF0dXMucmVtb3ZlKCk7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgPiAuc2xpZGVzXCIpLmFwcGVuZENoaWxkKHJldmVhbFN0YXR1cyk7XG4gIH1cblxuICAvLyBNYWtlIGFueSByZXZlYWwgc2xpZGVzIHdpdGggbGl2ZSBjZWxscyBzY3JvbGxhYmxlXG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucmV2ZWFsIC5leGVyY2lzZS1jZWxsXCIpLmZvckVhY2goKGVsKSA9PiB7XG4gICAgZWwuY2xvc2VzdCgnc2VjdGlvbi5zbGlkZScpLmNsYXNzTGlzdC5hZGQoXCJzY3JvbGxhYmxlXCIpO1xuICB9KVxuXG4gIC8vIFB5b2RpZGUgc3VwcGxlbWVudGFsIGRhdGEgYW5kIG9wdGlvbnNcbiAgY29uc3QgZGF0YUNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwicHlvZGlkZS1kYXRhXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGRhdGFDb250ZW50KSk7XG5cbiAgLy8gR3JhYiBsaXN0IG9mIHJlc291cmNlcyB0byBiZSBkb3dubG9hZGVkXG4gIGNvbnN0IGZpbGVzQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYHNjcmlwdFt0eXBlPVxcXCJ2ZnMtZmlsZVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGZpbGVzID0gSlNPTi5wYXJzZShiNjREZWNvZGUoZmlsZXNDb250ZW50KSk7XG5cbiAgbGV0IHB5b2RpZGVQcm9taXNlID0gKGFzeW5jICgpID0+IHtcbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYERvd25sb2FkaW5nIFB5b2RpZGVgO1xuICAgIGNvbnN0IHB5b2RpZGUgPSBhd2FpdCBzdGFydFB5b2RpZGVXb3JrZXIoZGF0YS5vcHRpb25zKTtcblxuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcGFja2FnZTogbWljcm9waXBgO1xuICAgIGF3YWl0IHB5b2RpZGUubG9hZFBhY2thZ2UoXCJtaWNyb3BpcFwiKTtcbiAgICBjb25zdCBtaWNyb3BpcCA9IGF3YWl0IHB5b2RpZGUucHlpbXBvcnQoXCJtaWNyb3BpcFwiKTtcbiAgICBhd2FpdCBkYXRhLnBhY2thZ2VzLnBrZ3MubWFwKChwa2cpID0+ICgpID0+IHtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcGFja2FnZTogJHtwa2d9YDtcbiAgICAgIHJldHVybiBtaWNyb3BpcC5pbnN0YWxsKHBrZyk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG4gICAgYXdhaXQgbWljcm9waXAuZGVzdHJveSgpO1xuXG4gICAgLy8gRG93bmxvYWQgYW5kIGluc3RhbGwgcmVzb3VyY2VzXG4gICAgYXdhaXQgZmlsZXMubWFwKChmaWxlKSA9PiBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBuYW1lID0gZmlsZS5zdWJzdHJpbmcoZmlsZS5sYXN0SW5kZXhPZignLycpICsgMSk7XG4gICAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYERvd25sb2FkaW5nIHJlc291cmNlOiAke25hbWV9YDtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goZmlsZSk7XG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgZG93bmxvYWQgXFxgJHtmaWxlfVxcYC4gRXJyb3IgJHtyZXNwb25zZS5zdGF0dXN9OiBcIiR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1cIi5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5hcnJheUJ1ZmZlcigpO1xuXG4gICAgICAvLyBTdG9yZSBVUkxzIGluIHRoZSBjd2Qgd2l0aG91dCBhbnkgc3ViZGlyZWN0b3J5IHN0cnVjdHVyZVxuICAgICAgaWYgKGZpbGUuaW5jbHVkZXMoXCI6Ly9cIikpIHtcbiAgICAgICAgZmlsZSA9IG5hbWU7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbGxhcHNlIGhpZ2hlciBkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBmaWxlID0gY29sbGFwc2VQYXRoKGZpbGUpO1xuXG4gICAgICAvLyBDcmVhdGUgZGlyZWN0b3J5IHRyZWUsIGlnbm9yaW5nIFwiZGlyZWN0b3J5IGV4aXN0c1wiIFZGUyBlcnJvcnNcbiAgICAgIGNvbnN0IHBhcnRzID0gZmlsZS5zcGxpdCgnLycpLnNsaWNlKDAsIC0xKTtcbiAgICAgIGxldCBwYXRoID0gJyc7XG4gICAgICB3aGlsZSAocGFydHMubGVuZ3RoID4gMCkge1xuICAgICAgICBwYXRoICs9IHBhcnRzLnNoaWZ0KCkgKyAnLyc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgcHlvZGlkZS5GUy5ta2RpcihwYXRoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGlmIChlLm5hbWUgIT09IFwiRXJybm9FcnJvclwiKSB0aHJvdyBlO1xuICAgICAgICAgIGlmIChlLmVycm5vICE9PSAyMCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0UHRyID0gYXdhaXQgcHlvZGlkZS5fbW9kdWxlLl9zdHJlcnJvcihlLmVycm5vKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHB5b2RpZGUuX21vZHVsZS5VVEY4VG9TdHJpbmcoZXJyb3JUZXh0UHRyKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgRmlsZXN5c3RlbSBFcnJvciAke2UuZXJybm99IFwiJHtlcnJvclRleHR9XCIuYCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFdyaXRlIHRoaXMgZmlsZSB0byB0aGUgVkZTXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgcHlvZGlkZS5GUy53cml0ZUZpbGUoZmlsZSwgbmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZS5uYW1lICE9PSBcIkVycm5vRXJyb3JcIikgdGhyb3cgZTtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0UHRyID0gYXdhaXQgcHlvZGlkZS5fbW9kdWxlLl9zdHJlcnJvcihlLmVycm5vKTtcbiAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcHlvZGlkZS5fbW9kdWxlLlVURjhUb1N0cmluZyhlcnJvclRleHRQdHIpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZpbGVzeXN0ZW0gRXJyb3IgJHtlLmVycm5vfSBcIiR7ZXJyb3JUZXh0fVwiLmApO1xuICAgICAgfVxuICAgIH0pLnJlZHVjZSgoY3VyLCBuZXh0KSA9PiBjdXIudGhlbihuZXh0KSwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuXG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBQeW9kaWRlIGVudmlyb25tZW50IHNldHVwYDtcbiAgICBhd2FpdCBzZXR1cFB5dGhvbihweW9kaWRlKTtcblxuICAgIHN0YXR1c1RleHQucmVtb3ZlKCk7XG4gICAgaWYgKHN0YXR1c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgc3RhdHVzQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiBweW9kaWRlO1xuICB9KSgpLmNhdGNoKChlcnIpID0+IHtcbiAgICBzdGF0dXNUZXh0LnN0eWxlLmNvbG9yID0gXCJ2YXIoLS1leGVyY2lzZS1lZGl0b3ItaGwtZXIsICNBRDAwMDApXCI7XG4gICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGVyci5tZXNzYWdlO1xuICAgIC8vaW5kaWNhdG9yQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuc3Bpbm5lci1ncm93XCIpLmNsYXNzTGlzdC5hZGQoXCJkLW5vbmVcIik7XG4gICAgdGhyb3cgZXJyO1xuICB9KTtcblxuICAvLyBLZWVwIHRyYWNrIG9mIGluaXRpYWwgT0pTIGJsb2NrIHJlbmRlclxuICBjb25zdCByZW5kZXJlZE9qcyA9IHt9O1xuXG4gIGNvbnN0IHByb2Nlc3MgPSBhc3luYyAoY29udGV4dCwgaW5wdXRzKSA9PiB7XG4gICAgY29uc3QgcHlvZGlkZSA9IGF3YWl0IHB5b2RpZGVQcm9taXNlO1xuICAgIGNvbnN0IGV2YWx1YXRvciA9IG5ldyBQeW9kaWRlRXZhbHVhdG9yKHB5b2RpZGUsIGNvbnRleHQpO1xuICAgIGF3YWl0IGV2YWx1YXRvci5wcm9jZXNzKGlucHV0cyk7XG4gICAgcmV0dXJuIGV2YWx1YXRvci5jb250YWluZXI7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHB5b2RpZGVQcm9taXNlLFxuICAgIHJlbmRlcmVkT2pzLFxuICAgIHByb2Nlc3MsXG4gIH07XG59XG4ifV19
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="qrjs_pics/unsoed_logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://imron-slide.vercel.app">irosyadi-2026</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="site_libs/revealjs/plugin/search/search.js"></script>
  <script src="site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': false,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script type="ojs-module-contents">
    eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBSMV9rID0gSW5wdXRzLnJhbmdlKFsxLCAxMDBdLCB7c3RlcDogMSwgdmFsdWU6IDEwLCBsYWJlbDogXCJSMSAoa86pKVwifSlcbnZpZXdvZiBSMl9rID0gSW5wdXRzLnJhbmdlKFsxLCAxMDBdLCB7c3RlcDogMSwgdmFsdWU6IDQ3LCBsYWJlbDogXCJSMiAoa86pKVwifSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnUjFfaycpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdSMl9rJykifV19
    </script>
    <script type="module">
    if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
    window._ojs.paths.runtimeToDoc = "../..";
    window._ojs.paths.runtimeToRoot = "../..";
    window._ojs.paths.docToRoot = "";
    window._ojs.selfContained = false;
    window._ojs.runtime.interpretFromScriptTags();
    </script>
    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
          const outerScaffold = trigger.parentElement.cloneNode(true);
          const codeEl = outerScaffold.querySelector('code');
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp('/' + window.location.host + '/');
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>